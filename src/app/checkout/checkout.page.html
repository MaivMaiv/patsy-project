<ion-header>
  <ion-toolbar>
    <ion-icon
      (click)="menu()"
      slot="start"
      size="large"
      name="arrow-back-outline"
    ></ion-icon>
    <ion-title>
      <img src="assets\logo_patsy.png" />
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="card-checkout">
    <ion-card>
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col class="sub-card1" size="6">
              <ion-card>
                <ion-card-header>
                  <ion-card-title>Checkout:</ion-card-title>
                </ion-card-header>
                <ion-card-content>
                  <ion-grid>
                    <ion-row
                      *ngFor="let check of checkoutProducts; let i = index"
                      size="8"
                      size="3"
                    >
                      <ion-col size="4">
                        <img
                          class="checkout-img"
                          alt="Silhouette of mountains"
                          [src]="check.cartImage"
                        />
                      </ion-col>
                      <ion-col size="6">
                        <h2>Product Name:</h2>
                        <h1>{{check.cartName}}</h1>
                        <h2>Product Cost:</h2>
                        <h1>P {{check.cartCost}}.00 x {{check.cartNumber}}</h1>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-card-content>
              </ion-card>
            </ion-col>

            <ion-col class="sub-card2" size="6">
              <ion-card>
                <ion-card-content>
                  <div class="payment-block">
                    <h3><span>Payment Mode</span></h3>
                    <ion-segment
                      color="success"
                      [(ngModel)]="checkoutDetails.transactionType"
                    >
                      <ion-segment-button value="Cash">
                        <ion-label>Cash</ion-label>
                      </ion-segment-button>
                      <ion-segment-button value="Gcash">
                        <ion-label>Gcash</ion-label>
                      </ion-segment-button>
                    </ion-segment>
                  </div>
                  <div
                    *ngIf="checkoutDetails.transactionType == 'Gcash'"
                    classs="payment-details"
                  >
                    <h3 class="divider"><span>Gcash Number</span></h3>
                    <ion-input
                      [(ngModel)]="checkoutDetails.checkoutNumber"
                      aria-label="Custom input"
                      placeholder="Enter Gcash Number"
                      class="custom"
                      [counter]="true"
                      [maxlength]="11"
                    ></ion-input>
                  <h3 class="divider"><span>Gcash Paid Amount</span></h3>
                  <ion-input
                    [(ngModel)]="checkoutDetails.checkoutPaid"
                    aria-label="Custom input"
                    placeholder="Enter Paid Amount"
                    class="custom"
                    [counter]="true"
                    [maxlength]="4"
                  ></ion-input>
                </div>
                <div
                *ngIf="checkoutDetails.transactionType == 'Cash'"
                classs="payment-details"
              >
              <h3 class="divider"><span>Paid Amount</span></h3>
              <ion-input
                [(ngModel)]="checkoutDetails.checkoutPaid"
                aria-label="Custom input"
                placeholder="Enter Paid Amount"
                class="custom"
                [counter]="true"
                [maxlength]="4"
              ></ion-input>
            </div>
                  <br />
                  <h3><span>Customer Type</span></h3>
                  <ion-segment
                    color="success"
                    [(ngModel)]="checkoutDetails.customerType"
                  >
                    <ion-segment-button value="Member">
                      <ion-label>Member</ion-label>
                    </ion-segment-button>
                    <ion-segment-button value="Guest">
                      <ion-label>Guest</ion-label>
                    </ion-segment-button>
                  </ion-segment>
                  <br />
                  <div
                    *ngIf="checkoutDetails.customerType == 'Guest'"
                    classs="payment-details"
                  >
                    <h3 class="divider"><span>Buyer Details</span></h3>
                    <ion-input
                      [(ngModel)]="checkoutDetails.checkoutCustomer"
                      aria-label="Custom input"
                      placeholder="Enter Nickname"
                      class="custom"
                      [counter]="true"
                      [maxlength]="20"
                    ></ion-input>
                  </div>
                  <div
                    *ngIf="checkoutDetails.customerType == 'Member'"
                    classs="payment-details"
                  >
                    <h3 *ngIf="!memberHasBeenScanned" class="divider">
                      <span>Click to Scan Member</span>
                    </h3>
                    <h3 *ngIf="memberHasBeenScanned" class="divider">
                      <span>WELCOME!</span>
                    </h3>
                    <div *ngIf="!memberHasBeenScanned" class="ion-card-scan">
                      <ion-icon
                        (click)="scanProfile()"
                        class="qr-icon"
                        name="qr-code"
                      ></ion-icon>
                    </div>
                    <div *ngIf="memberHasBeenScanned" class="ion-card-scan">
                      <h1>{{checkoutDetails.checkoutCustomer}}</h1>
                    </div>
                  </div>
                  <br />
                  <ion-card-subtitle>TOTAL:</ion-card-subtitle>
                  <ion-card-title> P {{checkoutAmount}}.00</ion-card-title>
                  <ion-button
                    [disabled]="!checkoutDetails.customerType || !checkoutDetails.checkoutCustomer || !checkoutDetails.transactionType"
                    (click)="placeOrder()"
                    color="success"
                    expand="block"
                    >Place Order</ion-button
                  >
                </ion-card-content>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
